(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),r=a(25),c=a.n(r),i=a(14),o=a(15),l=a(18),d=a(19),j=a(31),h=a(10),m=(a(98),a(117),a(118),a(185)),b=a(178),u=a(188),O=a(182),p=a(9),x=a(2),f=a(38),g=a(184),y=a(179),v=a(104),C=a(105),S=a(183);function D(){var e=L.currentUserValue;return e&&e.token?{Authorization:"Bearer ".concat(e.token),"Content-Type":"application/json"}:{"Content-Type":"application/json"}}var M=a(23);function N(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&L.logout();var s=a&&a.error&&a.error.message||e.statusText;return function(e){M.b.error(e)}(s),Promise.reject(s)}return a}))}var w=a(16),T=Object(w.b)(),k="http://deez.lk/api",I=new S.a(JSON.parse(localStorage.getItem("currentUser"))),L={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("".concat(k,"/users/login"),a).then(N).then((function(e){return function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}};return fetch("".concat(k,"/whoAmI"),t).then(N).then((function(t){return t=Object(x.a)(Object(x.a)({},t),{},{token:e})}))}(e.token).then((function(e){return localStorage.setItem("currentUser",JSON.stringify(e)),I.next(e),e}))}))},logout:function(){T.replace("/sign-in"),localStorage.removeItem("currentUser"),I.next(null)},currentUser:I.asObservable(),get currentUserValue(){return I.value}};var q={getOperatorWithOperations:function(){var e=new Date,t=new Date(e);t.setMonth(t.getMonth()-1);var a=new Date(t.getFullYear(),t.getMonth(),1);console.log(a.toUTCString());var s={method:"GET",headers:D()};return fetch("".concat(k,'/operators?filter=\n  {\n    "where":{"isResigned": false},\n    "include": [\n      {\n        "relation": "operatorSteps",\n        "scope": {\n          "where": {\n            "completeTime": {\n              "gte": [\n                "').concat(a.toUTCString(),'"\n              ]\n            }\n          },\n          "order": [\n            "id desc"\n          ],\n          "fields": {\n            "id": "true",\n            "stepId": "true",\n            "operatorId": "true",\n            "completeTime": "true",\n            "quantity": "true"\n          },\n          "include": [\n            {\n              "relation": "step",\n              "scope": {\n                "fields": {\n                  "id": "true",\n                  "name": "true",\n                  "estimatedTime": "true",\n                  "designId": "true"\n                }\n              }\n            }\n          ]\n        }\n      }\n    ]\n  }'),s).then(N)},getOperators:function(){var e={method:"GET",headers:D()};return fetch("".concat(k,"/operators"),e).then(N)},getMachineOperatorsAndHelpers:function(){var e={method:"GET",headers:D()};return fetch("".concat(k,'/operators?filter={"where":{"isResigned": false, "type": {"nin": ["3","4","5"]}}}'),e).then(N)},addOperator:function(e){var t={method:"POST",headers:D(),body:JSON.stringify(e)};return fetch("".concat(k,"/operators"),t).then(N)},editOperator:function(e,t){var a={method:"PATCH",headers:D(),body:JSON.stringify(t)};return fetch("".concat(k,"/operators/").concat(e),a).then(N)},updateOperatorSteps:function(e,t){var a={method:"PATCH",headers:D(),body:JSON.stringify(t)};return fetch("".concat(k,"/operator-steps/").concat(e),a).then(N)},deleteOperator:function(e){var t={method:"DELETE",headers:D()};return fetch("".concat(k,"/operators/").concat(e),t).then(N)},fetchDesigns:function(){var e={method:"GET",headers:D()};return fetch("".concat(k,'/designs?filter={"where":{"isComplete": false},"order": ["id desc"],"include": [{"relation": "steps"}]}'),e).then(N)},addOperatorOperations:function(e){var t={method:"POST",headers:D(),body:JSON.stringify(e)};return fetch("".concat(k,"/operator-steps"),t).then(N)}};var E={getAllDesigns:function(e){var t={method:"GET",headers:D()};return fetch("".concat(k,"/designs?filter={").concat("incomplete"===e?'"where":{"isComplete": false},':"complete"===e?'"where":{"isComplete": true},':"",'"order": ["id desc"],"include": [{"relation": "steps", "scope":{"include": [{"relation": "operatorSteps", "order": ["id desc"], "scope":{"include": [{"relation": "operator"}]}}]}}]}'),t).then(N)},getLastTwoMonthsAllDesigns:function(){var e=new Date,t=new Date(e);t.setMonth(t.getMonth()-3);var a=new Date(t.getFullYear(),t.getMonth(),1),s={method:"GET",headers:D()};return fetch("".concat(k,'/designs?filter={\n          "where": {\n            "startTime": {\n              "gte": [\n                "').concat(a.toUTCString(),'"\n              ]\n            }\n          },"order": ["id desc"],"include": [{"relation": "steps",\n        "scope": {\n          "fields": {\n            "id": "true",\n            "estimatedTime": "true",\n            "designId": "true"\n          },\n          "include": [{"relation": "operatorSteps", "order": ["id desc"]}]\n        }}]}'),s).then(N)},getAllDesignsWithOperator:function(){var e={method:"GET",headers:D()};return fetch("".concat(k,'/designs?filter={"order": ["id desc"],"include": [{"relation": "steps", "scope":{"include": [{"relation": "operatorSteps", "scope":{"include": [{"relation": "operator"}]}}]}}]}'),e).then(N)},getAllIncompleteDesignsWithOperator:function(){var e={method:"GET",headers:D()};return fetch("".concat(k,'/designs?filter={"where":{"isComplete": false},"order": ["id desc"],"include": [{"relation": "steps", "scope":{"include": [{"relation": "operatorSteps", "scope":{"include": [{"relation": "operator"}]}}]}}]}'),e).then(N)},getIncompleteDesignsWithOperations:function(){var e={method:"GET",headers:D()};return fetch("".concat(k,'/designs?filter={"where":{"isComplete": false},"order": ["id desc"],"include": [{"relation": "steps"}]}'),e).then(N)},addDesign:function(e){var t={method:"POST",headers:D(),body:JSON.stringify(e)};return fetch("".concat(k,"/designs"),t).then(N)},deleteDesign:function(e){var t={method:"DELETE",headers:D()};return fetch("".concat(k,"/designs/").concat(e),t).then(N)},editDesign:function(e,t){var a={method:"PATCH",headers:D(),body:JSON.stringify(t)};return fetch("".concat(k,"/designs/").concat(e),a).then(N)}};var B={addOperations:function(e){var t={method:"POST",headers:D(),body:JSON.stringify(e)};return fetch("".concat(k,"/steps"),t).then(N)},updateOperations:function(e,t){var a={method:"PUT",headers:D(),body:JSON.stringify(t)};return fetch("".concat(k,"/steps/").concat(e),a).then(N)},addAllOperations:function(e){var t={method:"POST",headers:D(),body:JSON.stringify(e)};return fetch("".concat(k,"/steps-multi"),t).then(N)}};var F=a(11),P=a(0),V=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).notifyError=function(e){return M.b.error(e)},s.notifySuccess=function(e){return M.b.success(e)},s.handleSubmit=function(e){!1===e.currentTarget.checkValidity()?s.setState({validated:!0}):(s.setState({isLoading:!0}),Object(F.trackPromise)(q.addOperator(s.state.form).then((function(e){s.setState({isLoading:!1,form:Object(x.a)(Object(x.a)({},s.state.form),{},{name:"",fullName:"",team:"1",type:"1",isQC:!1,nationalId:"",bankAccount:"",bank:"",distance:""})}),s.notifySuccess('Operator "'.concat(e.name,'" added successfully'))}),(function(e){s.notifyError(e)})))),e.preventDefault(),e.stopPropagation()},s.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;console.log(n),s.setState({form:Object(x.a)(Object(x.a)({},s.state.form),{},Object(p.a)({},n,a))})},s.state={form:{name:"",fullName:"",team:"1",type:"1",isQC:!1,nationalId:"",bankAccount:"",bank:"",distance:"",startDate:new Date,resignDate:new Date,isResigned:!1},validated:!1,isLoading:!1},s.handleInputChange=s.handleInputChange.bind(Object(f.a)(s)),s}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsxs)(b.a,{children:[Object(P.jsx)("br",{}),Object(P.jsx)("h2",{children:"Add Operator"}),Object(P.jsx)("br",{}),Object(P.jsxs)(g.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,children:[Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"name",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Name"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"name",value:this.state.form.name,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"fullName",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Full Name (with initials)"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"fullName",value:this.state.form.fullName,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"team",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Team"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsxs)(g.a.Control,{name:"team",as:"select",defaultValue:this.state.form.team,onChange:this.handleInputChange,children:[Object(P.jsx)("option",{value:"1",children:"1"}),Object(P.jsx)("option",{value:"2",children:"2"}),Object(P.jsx)("option",{value:"3",children:"3"})]})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"type",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Select Operator Type"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsxs)(g.a.Control,{as:"select",name:"type",defaultValue:this.state.form.type,onChange:this.handleInputChange,children:[Object(P.jsx)("option",{value:"1",children:"Machine Operator"}),Object(P.jsx)("option",{value:"2",children:"Helper"}),Object(P.jsx)("option",{value:"3",children:"Cutting"}),Object(P.jsx)("option",{value:"4",children:"QC"}),Object(P.jsx)("option",{value:"5",children:"Manager"})]})})]}),"2"===this.state.form.type&&Object(P.jsxs)(g.a.Group,{as:y.a,id:"type",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Is QC?"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Check,{name:"isQC",type:"checkbox",label:"",checked:this.state.form.isQC,onChange:this.handleInputChange})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"nationalId",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"National Id"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"nationalId",value:this.state.form.nationalId,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"bank",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Bank Name"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"bank",value:this.state.form.bank,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"bankAccount",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Bank Account Number"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"bankAccount",value:this.state.form.bankAccount,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"distance",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Distance (KM)"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"distance",value:this.state.form.distance,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsx)(C.a,{type:"submit",className:"mt-3",disabled:this.state.isLoading,variant:"dark",children:this.state.isLoading?"Loading":"Add Operator"})]})]})}}]),a}(n.a.Component),G=a(8),A=a(180),H=a(187),z=a(20),U=a(21),Y=a(17),R=a.n(Y),Q=a(76),K=a.n(Q),W=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).notifyError=function(e){return M.b.error(e)},s.notifySuccess=function(e){return M.b.success(e)},s.editOperator=function(e,t){var a=R.a.cloneDeep(s.state.operators[t]);a.ind=t,s.setState({selectedOperator:a,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showEditModal:!0,title:"Edit Operator ".concat(a.name)})})},s.removeOperator=function(e,t){var a=s.state.operators[t];s.setState({selectedOperator:a,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showConfirmation:!0,title:"Remove Operator ".concat(a.name),body:"Are you sure ?"})})},s.confirmEdit=function(){s.setState({isLoading:!0});var e=R.a.cloneDeep(Object.fromEntries(Object.entries(s.state.selectedOperator).filter((function(e){var t=Object(G.a)(e,2);t[0];return null!=t[1]}))));delete e.ind,Object(F.trackPromise)(q.editOperator(s.state.selectedOperator.id,e).then((function(e){var t=s.state.operators,a=s.state.selectedOperator.ind;console.log("here",a),t[a]=s.state.selectedOperator,s.setState({operators:t,isLoading:!1}),s.handleClose(),s.notifySuccess("".concat(s.state.selectedOperator.name," successfully edited"))}),(function(e){s.notifyError(e)})))},s.confirmDelete=function(){s.setState({isLoading:!0}),Object(F.trackPromise)(q.deleteOperator(s.state.selectedOperator.id).then((function(){var e=s.state.operators,t=e.indexOf(s.state.selectedOperator);e.splice(t,1),s.setState({operators:e,isLoading:!1}),s.handleClose(),s.notifySuccess("".concat(s.state.selectedOperator.name," successfully deleted"))}),(function(e){s.notifyError(e)})))},s.handleClose=function(){s.setState({modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showConfirmation:!1,showSuccess:!1,showEditModal:!1})})},s.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;s.setState({selectedOperator:Object(x.a)(Object(x.a)({},s.state.selectedOperator),{},Object(p.a)({},n,a))})},s.handleDateChange=function(e){s.setState({selectedOperator:Object(x.a)(Object(x.a)({},s.state.selectedOperator),{},Object(p.a)({},"resignDate",e))})},s.state={operators:[],modal:{showConfirmation:!1,showSuccess:!1,showEditModal:!1,title:"",body:""},selectedOperator:{},isLoading:!1},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;L.currentUser.subscribe((function(t){return e.setState({currentUser:t})})),Object(F.trackPromise)(q.getOperators().then((function(t){var a=t||[];e.setState({operators:a})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"render",value:function(){var e=this;return Object(P.jsxs)(b.a,{children:[Object(P.jsx)("br",{}),Object(P.jsx)("h2",{children:"Edit Operators"}),Object(P.jsx)("br",{}),Object(P.jsx)(y.a,{children:Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{children:"Team"}),Object(P.jsx)("th",{width:90})]})}),Object(P.jsx)("tbody",{children:this.state.operators&&this.state.operators.map((function(t,a){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t.name}),Object(P.jsx)("td",{children:t.team}),Object(P.jsxs)("td",{className:"text-center",children:[Object(P.jsx)(C.a,{variant:"outline-primary",onClick:function(){return e.editOperator(t.id,a)},size:"sm",children:Object(P.jsx)(z.a,{icon:U.c})}),"\xa0"]})]},a)}))})]})}),Object(P.jsxs)(H.a,{show:this.state.modal.showEditModal,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsx)(H.a.Body,{children:Object(P.jsx)(b.a,{children:Object(P.jsxs)(g.a,{noValidate:!0,validated:this.state.validated,children:[Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"name",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Name"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"name",defaultValue:this.state.selectedOperator.name,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"fullName",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Full Name (with initials)"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"fullName",value:this.state.selectedOperator.fullName,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"team",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Team"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsxs)(g.a.Control,{name:"team",as:"select",defaultValue:this.state.selectedOperator.team,onChange:this.handleInputChange,children:[Object(P.jsx)("option",{value:"1",children:"1"}),Object(P.jsx)("option",{value:"2",children:"2"}),Object(P.jsx)("option",{value:"3",children:"3"})]})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"type",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Select Operator Type"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsxs)(g.a.Control,{as:"select",name:"type",defaultValue:this.state.selectedOperator.type,onChange:this.handleInputChange,children:[Object(P.jsx)("option",{value:"1",children:"Machine Operator"}),Object(P.jsx)("option",{value:"2",children:"Helper"}),Object(P.jsx)("option",{value:"3",children:"Cutting"}),Object(P.jsx)("option",{value:"4",children:"QC"}),Object(P.jsx)("option",{value:"5",children:"Manager"})]})})]}),"2"===this.state.selectedOperator.type&&Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"isQC",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Is QC?"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Check,{name:"isQC",type:"checkbox",label:"",checked:this.state.selectedOperator.isQC,onChange:this.handleInputChange})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"nationalId",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"National Id"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"nationalId",value:this.state.selectedOperator.nationalId,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"bank",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Bank Name"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"bank",value:this.state.selectedOperator.bank,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"bankAccount",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Bank Account Number"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"text",name:"bankAccount",value:this.state.selectedOperator.bankAccount,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"distance",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Distance (KM)"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Control,{type:"number",name:"distance",value:this.state.selectedOperator.distance,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"isResigned",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Is Resigned?"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(g.a.Check,{name:"isResigned",type:"checkbox",label:"",checked:this.state.selectedOperator.isResigned,onChange:this.handleInputChange})})]}),this.state.selectedOperator.isResigned&&Object(P.jsxs)(g.a.Group,{as:y.a,className:"mb-3",id:"resignDate",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"4",children:"Resigned Date"}),Object(P.jsx)(v.a,{sm:"8",children:Object(P.jsx)(K.a,{name:"resignDate",onChange:this.handleDateChange,value:this.state.selectedOperator.resignDate})})]})]})})}),Object(P.jsxs)(H.a.Footer,{children:[Object(P.jsx)(C.a,{variant:"secondary",onClick:this.confirmEdit,children:this.state.isLoading?"Loading":"Edit"}),Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose,children:"Cancel"})]})]}),Object(P.jsxs)(H.a,{show:this.state.modal.showConfirmation,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsx)(H.a.Body,{children:this.state.modal.body}),Object(P.jsxs)(H.a.Footer,{children:[Object(P.jsx)(C.a,{variant:"secondary",onClick:this.confirmDelete,children:this.state.isLoading?"Loading":"Confirm"}),Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose,children:"Cancel"})]})]})]})}}]),a}(n.a.Component),J=a(181),_=a(186),Z=a(30),X=a.n(Z),$=a(44),ee=a.n($),te=a.p+"static/media/deez-logo.de9bcd45.png",ae={getAll:function(){var e={method:"GET",headers:D()};return fetch("".concat(k,"/settings"),e).then(N)},updateAll:function(e,t){var a={method:"PATCH",headers:D(),body:JSON.stringify(t)};return fetch("".concat(k,"/settings/").concat(e),a).then(N)}};var se=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).fetchDesigns=function(){Object(F.trackPromise)(E.getLastTwoMonthsAllDesigns().then((function(e){var t=s.calculateTimeToComplete(e);s.setState({designs:t}),s.fetchOperators()}),(function(e){s.setState({msg:e}),console.error("Error:",e)})))},s.fetchSettings=function(){Object(F.trackPromise)(ae.getAll().then((function(e){s.setState({settings:e[0]})}),(function(e){s.setState({msg:e}),console.error("Error:",e)})))},s.calculateTimeToComplete=function(e){var t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1,0,0,0),n=new Date(t.getFullYear(),t.getMonth()-1,1,0,0,0),r={},c={};return s.createBrandObject(r),s.createBrandObject(c),e.map((function(e,t){var i={},o={},l={};return s.createBrandObject(i),s.createBrandObject(o),s.createBrandObject(l),e.steps&&e.steps.map((function(t,s){return i.total+=t.estimatedTime,i[e.brand]+=t.estimatedTime,2!==e.type&&(t.operatorSteps&&t.operatorSteps.map((function(s,r){return new Date(s.completeTime)>new Date(a)?(o.total+=t.estimatedTime*s.quantity,o[e.brand]+=t.estimatedTime*s.quantity):new Date(s.completeTime)>new Date(n)&&(l.total+=t.estimatedTime*s.quantity,l[e.brand]+=t.estimatedTime*s.quantity),s})),i)})),r.total+=o.total/i.total||0,c.total+=l.total/i.total||0,s.state.settings.brands.forEach((function(e){r[e]+=o[e]/i[e]||0,c[e]+=l[e]/i[e]||0})),e.totalTime=i.total,e.sewingValueForSecond=(e.sewingValue?e.sewingValue:0)/i.total,e})),console.log(r,c),s.setState({thisMonthCompletedCount:r,lastMonthCompletedCount:c}),e},s.createBrandObject=function(e){e.total=0,s.state.settings.brands.forEach((function(t){e[t]=0}))},s.fetchOperators=function(){Object(F.trackPromise)(q.getOperatorWithOperations().then((function(e){var t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),n=ee()(a).add(-1,"days"),r=new Date(t.setDate(a.getDate()+1)),c=ee()(new Date).subtract(1,"months").endOf("month"),i=ee()(new Date).subtract(2,"months").endOf("month"),o=0,l=0;e.map((function(e,t){"2"===e.type&&o++,"3"===e.type&&l++;var d=s.calculateSalary(e,a,r);e.todaySalary=d.totalSalary,e.todayTime=d.totalTime,e.todayCompleteCount=d.totalCompleteCount.total;var j=s.calculateSalary(e,n,a);e.yesterdaySalary=j.totalSalary,e.yesterdayTime=j.totalTime,e.yesterdayCompleteCount=j.totalCompleteCount.total,e.yesterdayCLCompleteCount=j.totalCompleteCount.cleopatra,e.yesterdayNLMCompleteCount=j.totalCompleteCount.nolimit,e.yesterdayMBCompleteCount=j.totalCompleteCount.modabella;var h=s.calculateSalary(e,c,r);e.thisMonthTime=h.totalTime,e.thisMonthSalary=h.totalSalary,e.thisMonthCompleteCount=h.totalCompleteCount.total,e.thisMonthCLCompleteCount=h.totalCompleteCount.cleopatra,e.thisMonthNLMCompleteCount=h.totalCompleteCount.nolimit,e.thisMonthMBCompleteCount=h.totalCompleteCount.modabella;var m=s.calculateSalary(e,i,c);return e.lastMonthTime=m.totalTime,e.lastMonthSalary=m.totalSalary,e.lastMonthCompleteCount=m.totalCompleteCount.total,e.lastMonthCLCompleteCount=m.totalCompleteCount.cleopatra,e.lastMonthNLMCompleteCount=m.totalCompleteCount.nolimit,e.lastMonthMBCompleteCount=m.totalCompleteCount.modabella,e.thisMonthWRKDays=s.calculateWorkDays(e,c,r),e.lastMonthWRKDays=s.calculateWorkDays(e,i,c),e.extraPayments=[],e}));var d=s.calculatePercentage(e);e.map((function(e,t){return e.todayPercentage=0===e.todayTime?0:Math.round(e.todayTime/d.totalTodayTime*1e4)/100,e.thisMonthPercentage=0===e.thisMonthTime?0:Math.round(e.thisMonthTime/d.totalThisMonthTime*1e4)/100,e.lastMonthPercentage=0===e.lastMonthTime?0:Math.round(e.lastMonthTime/d.totalLastMonthTime*1e4)/100,e})),s.calculateBonus(e),s.addOperatorInfo(e),e=R.a.orderBy(e,["todayTime","yesterdayTime"],["desc","desc"]),s.setState({operators:e,helpersCount:o,cutterCount:l})}),(function(e){s.setState({msg:e}),console.error("Error:",e)})))},s.viewSalarySheetModal=function(){s.setState((function(e){return{modal:Object(x.a)(Object(x.a)({},e.modal),{},{showSalaryModal:!0})}}))},s.handleClose=function(){s.setState({modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showInfoModal:!1,showSalaryModal:!1})})},s.sortOperator=function(e){if("today"===e){var t=R.a.orderBy(s.state.operators,["todaySalary"],["desc"]);s.setState({operators:t})}if("yesterday"===e){var a=R.a.orderBy(s.state.operators,["yesterdaySalary"],["desc"]);s.setState({operators:a})}if("thisMonth"===e){var n=R.a.orderBy(s.state.operators,["thisMonthSalary"],["desc"]);s.setState({operators:n})}if("lastMonth"===e){var r=R.a.orderBy(s.state.operators,["lastMonthSalary"],["desc"]);s.setState({operators:r})}},s.updateOperatorStep=function(e,t,a){Object(F.trackPromise)(q.updateOperatorSteps(e.id,{quantity:e.updatedQuantity}).then((function(n){s.fetchOperators(),e.editable=!1,e.quantity=e.updatedQuantity;var r=s.state.selectedOperator;r.operatorSteps[t][a]=e,s.setState({operator:r})}),(function(e){s.setState({msg:e}),console.error("Error:",e)})))},s.state={operators:[],helpersCount:0,cutterCount:0,designs:[],view:"monthly",operatorType:"operator",days:[],selectedOperator:{},thisMonthCompletedCount:{},lastMonthCompletedCount:{},modal:{showInfoModal:!1,showSalaryModal:!1},settings:{qcPrice:0,perKMPrice:0,maxTransportAmount:0,isTransportEnable:!1}},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchDesigns(),this.fetchSettings()}},{key:"calculateBonus",value:function(e){var t=this,a=R.a.orderBy(e,["thisMonthTime"],["desc"]),s=R.a.orderBy(e,["lastMonthTime"],["desc"]);a.map((function(e,t){return"1"!==e.type?(e.lastMonthBonus=0,!1):(e.thisMonthBonus=0===t?3e3:1===t?2e3:2===t?1e3:3===t?500:0,e)})),s.map((function(e,a){return"1"!==e.type?(e.lastMonthBonus=0,!1):(e.lastMonthBonus=0===a?3e3:1===a?2e3:2===a?1e3:3===a?500:0,e.performancePlaceLastMonth=t.ordinal_suffix_of(a+1),e)}))}},{key:"ordinal_suffix_of",value:function(e){var t=e%10,a=e%100;return 1===t&&11!==a?e+"st":2===t&&12!==a?e+"nd":3===t&&13!==a?e+"rd":e+"th"}},{key:"calculatePercentage",value:function(e){var t=0,a=0,s=0;return e&&e.map((function(e,n){return"1"===e.type&&(t+=e.lastMonthTime,a+=e.thisMonthTime,s+=e.todayTime,e)})),{totalLastMonthTime:t,totalThisMonthTime:a,totalTodayTime:s}}},{key:"timeFormatter",value:function(e){return(Math.floor(e/60/60/8)>0?Math.floor(e/60/60/8)+" days  ":"")+(Math.floor(e/60/60%8)>0?Math.floor(e/60/60%8)+" hrs  ":"")+(Math.floor(e/60%60)>0?Math.floor(e/60%60)+" mins  ":"")+e%60+" secs"}},{key:"salaryFormatter",value:function(e){return Object(P.jsxs)("span",{className:"salary-format",children:["Rs. ",Object(P.jsx)("span",{children:e?e.toFixed(2):0})]})}},{key:"calculateWorkDays",value:function(e,t,a){var s=[];e.operatorSteps&&e.operatorSteps.map((function(e,n){return new Date(t)>new Date(e.completeTime)||new Date(e.completeTime)>new Date(a)?e:s.push(e)}));var n=R.a.groupBy(s,(function(e){return ee()(e.completeTime).format("YYYY-MM-DD")}));return Object.keys(n).length}},{key:"calculateSalary",value:function(e,t,a){var s=this,n=0,r={};this.createBrandObject(r);var c=0;return e.operatorSteps&&e.operatorSteps.map((function(e,i){if(new Date(t)>new Date(e.completeTime)||new Date(e.completeTime)>new Date(a))return n;var o=R.a.find(s.state.designs,{id:e.step.designId});return o||alert("Design with id - "+e.step.designId+" not found"),n+=e.step.estimatedTime*e.quantity,r.total+=e.step.estimatedTime*e.quantity/o.totalTime,r[o.brand]+=e.step.estimatedTime*e.quantity/o.totalTime,c+=e.step.estimatedTime*e.quantity*o.sewingValueForSecond,e})),{totalTime:n,totalSalary:c,totalCompleteCount:r}}},{key:"calculateDaily",value:function(e){var t=this,a=0,s=0,n=0;return e&&e.map((function(e,r){var c=R.a.find(t.state.designs,{id:e.step.designId});return a+=e.step.estimatedTime*e.quantity,s+=e.step.estimatedTime*e.quantity/c.totalTime,n+=e.step.estimatedTime*e.quantity*c.sewingValueForSecond,e})),"".concat(this.salaryFormatter(n)," - ").concat(ee.a.duration(a,"seconds").format("hh [hr] mm [min]")," ~ ").concat(parseInt(s)," Dresses")}},{key:"calculateTransport",value:function(e){var t;return t=e.distance*e.lastMonthWRKDays*this.state.settings.perKMPrice*2,this.state.settings.maxTransportAmount>t?t:this.state.settings.maxTransportAmount}},{key:"calculateExtraPayments",value:function(e){var t=0;return e.extraPayments.map((function(e){return t+=e.val})),t}},{key:"calculateTotalSalary",value:function(e){var t=0;return"1"!==e.type&&"2"!==e.type||(t+=e.lastMonthSalary+e.lastMonthBonus),"3"===e.type&&(t=(20*this.state.lastMonthCompletedCount.nolimit+50*this.state.lastMonthCompletedCount.cleopatra+100*this.state.lastMonthCompletedCount.modabella)/this.state.cutterCount),"4"===e.type&&(t=this.state.settings.qcSalary),"5"===e.type&&(t=25*this.state.lastMonthCompletedCount.total),t+=this.calculateExtraPayments(e),this.state.settings.isTransportEnable&&(t+=this.calculateTransport(e)),this.salaryFormatter(t)}},{key:"addOperatorInfo",value:function(e){var t=[];e.map((function(a,s){return a.operatorSteps&&a.operatorSteps.map((function(e,t){return e.date=ee()(e.completeTime).format("MMM DD YYYY"),e})),a.operatorSteps=R.a.groupBy(a.operatorSteps,"date"),Object.keys(a.operatorSteps).map((function(e,s){return!t.includes(e)&&s<5&&t.push(e),a})),e})),t=t.slice(0,5),this.setState({days:t.reverse()})}},{key:"viewOperatorInfo",value:function(e){this.setState({modal:{showInfoModal:!0},selectedOperator:e})}},{key:"print",value:function(){this.handleClose(),window.print()}},{key:"render",value:function(){var e=this,t=new Date;return Object(P.jsxs)(b.a,{className:"non-printable",children:[Object(P.jsx)("br",{}),Object(P.jsxs)("div",{className:"d-flex flex-row justify-content-between mt-2 mb-2",children:[Object(P.jsxs)("div",{children:[Object(P.jsxs)(J.a,{size:"sm",children:[Object(P.jsx)(C.a,{variant:"operator"===this.state.operatorType?"primary":"outline-primary",onClick:function(){return e.setState({operatorType:"operator"})},children:"Machine Operator"}),Object(P.jsx)(C.a,{variant:"helper"===this.state.operatorType?"primary":"outline-primary",onClick:function(){return e.setState({operatorType:"helper"})},children:"Helper"})]}),"operator"===this.state.operatorType&&Object(P.jsx)("h2",{className:"mt-2",children:"View Operators"}),"helper"===this.state.operatorType&&Object(P.jsx)("h2",{className:"mt-2",children:"View Helpers"})]}),Object(P.jsx)("div",{children:Object(P.jsx)("div",{className:"flex-column",children:Object(P.jsxs)("div",{className:"d-flex flex-row",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{className:"justify-content-end",children:"This Month Completed Count"}),Object(P.jsx)("div",{className:"justify-content-end",children:"Cleopatra"}),Object(P.jsx)("div",{className:"justify-content-end",children:"Modabella"}),Object(P.jsx)("div",{className:"justify-content-end",children:"Nolimit"})]}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{className:"justify-content-start",children:[" : ",parseInt(this.state.thisMonthCompletedCount.total)]}),Object(P.jsxs)("div",{className:"justify-content-start",children:[" : ",parseInt(this.state.thisMonthCompletedCount.cleopatra)]}),Object(P.jsxs)("div",{className:"justify-content-start",children:[" : ",parseInt(this.state.thisMonthCompletedCount.modabella)]}),Object(P.jsxs)("div",{className:"justify-content-start",children:[" : ",parseInt(this.state.thisMonthCompletedCount.nolimit)]})]})]})})}),Object(P.jsx)("div",{children:Object(P.jsx)("div",{className:"flex-column",children:Object(P.jsxs)("div",{className:"d-flex flex-row",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{className:"justify-content-end",children:"Last Month Completed Count"}),Object(P.jsx)("div",{className:"justify-content-end",children:"Cleopatra"}),Object(P.jsx)("div",{className:"justify-content-end",children:"Modabella"}),Object(P.jsx)("div",{className:"justify-content-end",children:"Nolimit"})]}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{className:"justify-content-start",children:[" : ",parseInt(this.state.lastMonthCompletedCount.total)]}),Object(P.jsxs)("div",{className:"justify-content-start",children:[" : ",parseInt(this.state.lastMonthCompletedCount.cleopatra)]}),Object(P.jsxs)("div",{className:"justify-content-start",children:[" : ",parseInt(this.state.lastMonthCompletedCount.modabella)]}),Object(P.jsxs)("div",{className:"justify-content-start",children:[" : ",parseInt(this.state.lastMonthCompletedCount.nolimit)]})]})]})})}),Object(P.jsxs)("div",{className:"d-flex flex-column",children:[Object(P.jsxs)(C.a,{variant:"primary",onClick:this.viewSalarySheetModal,children:[Object(P.jsx)(z.a,{icon:U.f})," Print Salary Sheet"]}),"operator"===this.state.operatorType&&Object(P.jsxs)(J.a,{className:"mt-3",size:"sm",children:[Object(P.jsx)(C.a,{variant:"monthly"===this.state.view?"primary":"outline-primary",onClick:function(){return e.setState({view:"monthly"})},children:"Monthly"}),Object(P.jsx)(C.a,{variant:"daily"===this.state.view?"primary":"outline-primary",onClick:function(){return e.setState({view:"daily"})},children:"Daily"})]})]})]}),"operator"===this.state.operatorType&&Object(P.jsx)("div",{children:Object(P.jsxs)(y.a,{children:["monthly"===this.state.view&&Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{className:"d-none d-md-table-cell",children:"Team"}),Object(P.jsxs)("th",{className:"cursor-pointer d-none d-md-table-cell",onClick:function(){return e.sortOperator("lastMonth")},children:[Object(P.jsx)("span",{className:"d-none d-md-block",children:Object(P.jsx)(X.a,{format:"MMMM",subtract:{months:1},children:t})}),Object(P.jsx)("span",{className:"d-block d-md-none",children:Object(P.jsx)(X.a,{format:"MMM",subtract:{months:1},children:t})})]}),Object(P.jsxs)("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("thisMonth")},children:[Object(P.jsx)("span",{className:"d-none d-md-block",children:Object(P.jsx)(X.a,{format:"MMMM",children:t})}),Object(P.jsx)("span",{className:"d-block d-md-none",children:Object(P.jsx)(X.a,{format:"MMM",children:t})})]}),Object(P.jsx)("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("yesterday")},children:"Yesterday"}),Object(P.jsx)("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("today")},children:"Today"}),Object(P.jsx)("th",{width:40})]})}),Object(P.jsx)("tbody",{children:this.state.operators&&this.state.operators.map((function(t,a){return"1"===t.type&&Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t.name}),Object(P.jsx)("td",{className:"d-none d-md-table-cell",children:t.team}),Object(P.jsxs)("td",{className:"d-none d-md-table-cell",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("strong",{children:e.salaryFormatter(t.lastMonthSalary)})," + ",Object(P.jsx)("small",{className:"text-success",children:e.salaryFormatter(t.lastMonthBonus)})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("small",{children:e.timeFormatter(t.lastMonthTime)})," ~ ",Object(P.jsxs)("small",{children:[parseInt(t.lastMonthCompleteCount)," Dresses"]})]})]}),Object(P.jsxs)("td",{children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("strong",{children:e.salaryFormatter(t.thisMonthSalary)})," + ",Object(P.jsx)("small",{className:"text-muted",children:e.salaryFormatter(t.thisMonthBonus)})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("small",{children:e.timeFormatter(t.thisMonthTime)})," ~ ",Object(P.jsxs)("small",{children:[parseInt(t.thisMonthCompleteCount)," Dresses"]})]})]}),Object(P.jsxs)("td",{children:[Object(P.jsx)("div",{children:Object(P.jsx)("strong",{children:e.salaryFormatter(t.yesterdaySalary)})}),Object(P.jsxs)("div",{children:[Object(P.jsx)("small",{children:e.timeFormatter(t.yesterdayTime)})," ~ ",Object(P.jsxs)("small",{children:[parseInt(t.yesterdayCompleteCount)," Dresses"]})]})]}),Object(P.jsxs)("td",{children:[Object(P.jsx)("div",{children:Object(P.jsx)("strong",{children:e.salaryFormatter(t.todaySalary)})}),Object(P.jsxs)("div",{children:[Object(P.jsx)("small",{children:e.timeFormatter(t.todayTime)})," ~ ",Object(P.jsxs)("small",{children:[parseInt(t.todayCompleteCount)," Dresses"]})]})]}),Object(P.jsx)("td",{className:"text-center",children:Object(P.jsx)(C.a,{variant:"outline-primary",onClick:function(){return e.viewOperatorInfo(t)},size:"sm",children:Object(P.jsx)(z.a,{icon:U.d})})})]},a)}))})]}),"daily"===this.state.view&&Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),this.state.days.map((function(t,a){return Object(P.jsx)("th",{children:e.state.days[a]},a)})),Object(P.jsx)("th",{})]})}),Object(P.jsx)("tbody",{children:this.state.operators&&this.state.operators.map((function(t,a){return"1"===t.type&&Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t.name}),e.state.days.map((function(a,s){return Object(P.jsx)("td",{children:e.calculateDaily(t.operatorSteps[a])},s)})),Object(P.jsx)("td",{className:"text-center",children:Object(P.jsx)(C.a,{variant:"outline-primary",onClick:function(){return e.viewOperatorInfo(t)},size:"sm",children:Object(P.jsx)(z.a,{icon:U.d})})})]},a)}))})]})]})}),"helper"===this.state.operatorType&&Object(P.jsx)("div",{children:Object(P.jsx)(y.a,{children:Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsxs)("th",{className:"cursor-pointer d-none d-md-table-cell",onClick:function(){return e.sortOperator("lastMonth")},children:[Object(P.jsx)("span",{className:"d-none d-md-block",children:Object(P.jsx)(X.a,{format:"MMMM",subtract:{months:1},children:t})}),Object(P.jsx)("span",{className:"d-block d-md-none",children:Object(P.jsx)(X.a,{format:"MMM",subtract:{months:1},children:t})})]}),Object(P.jsxs)("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("thisMonth")},children:[Object(P.jsx)("span",{className:"d-none d-md-block",children:Object(P.jsx)(X.a,{format:"MMMM",children:t})}),Object(P.jsx)("span",{className:"d-block d-md-none",children:Object(P.jsx)(X.a,{format:"MMM",children:t})})]}),Object(P.jsx)("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("yesterday")},children:"Yesterday"}),Object(P.jsx)("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("today")},children:"Today"}),Object(P.jsx)("th",{width:40})]})}),Object(P.jsx)("tbody",{children:this.state.operators&&this.state.operators.map((function(t,a){if("1"===t.type)return!1;var s="4"===t.type;return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t.name}),Object(P.jsx)("td",{className:"d-none d-md-table-cell",children:Object(P.jsxs)("div",{children:[Object(P.jsxs)("strong",{children:[e.salaryFormatter(t.lastMonthSalary+(s?10*e.state.lastMonthCompletedCount.total:0))," "]}),Object(P.jsx)("br",{}),"~ ",Object(P.jsxs)("small",{children:[parseInt(t.lastMonthCompleteCount)," Helper Dresses "]}),s&&Object(P.jsxs)("small",{children:[" & ",e.state.lastMonthCompletedCount.totlal," Checked Dresses"]})]})}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{children:[Object(P.jsxs)("strong",{children:[e.salaryFormatter(t.thisMonthSalary+(s?10*e.state.thisMonthCompletedCount:0))," "]}),Object(P.jsx)("br",{}),"~ ",Object(P.jsxs)("small",{children:[parseInt(t.thisMonthCompleteCount)," Helper Dresses"]}),s&&Object(P.jsxs)("small",{children:[" & ",e.state.thisMonthCompletedCount," Checked Dresses"]})]})}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{children:[Object(P.jsxs)("strong",{children:[e.salaryFormatter(t.yesterdaySalary)," "]}),"~ ",Object(P.jsxs)("small",{children:[parseInt(t.yesterdayCompleteCount)," Dresses"]})]})}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{children:[Object(P.jsxs)("strong",{children:[e.salaryFormatter(t.todaySalary)," "]}),"~ ",Object(P.jsxs)("small",{children:[parseInt(t.todayCompleteCount)," Dresses"]})]})}),Object(P.jsx)("td",{className:"text-center",children:Object(P.jsx)(C.a,{variant:"outline-primary",onClick:function(){return e.viewOperatorInfo(t)},size:"sm",children:Object(P.jsx)(z.a,{icon:U.d})})})]},a)}))})]})})}),Object(P.jsxs)(H.a,{scrollable:!0,show:this.state.modal.showInfoModal,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsxs)(H.a.Title,{children:[this.state.selectedOperator.name,"'s Activities"]})}),Object(P.jsxs)(H.a.Body,{children:[Object(P.jsx)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(P.jsxs)("tbody",{children:[Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Today Work"}),Object(P.jsxs)("td",{className:"text-right",children:[this.state.selectedOperator.todayPercentage," %"]}),Object(P.jsx)("td",{className:"text-right",children:this.salaryFormatter(this.state.selectedOperator.todaySalary)})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"This Month Work"}),Object(P.jsxs)("td",{className:"text-right",children:[this.state.selectedOperator.thisMonthPercentage," %"]}),Object(P.jsx)("td",{className:"text-right",children:this.salaryFormatter(this.state.selectedOperator.thisMonthSalary)})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Last Month Work"}),Object(P.jsxs)("td",{className:"text-right",children:[this.state.selectedOperator.lastMonthPercentage," %"]}),Object(P.jsx)("td",{className:"text-right",children:this.salaryFormatter(this.state.selectedOperator.lastMonthSalary)})]})]})}),Object(P.jsx)(_.a,{defaultActiveKey:"0",className:"w-100",children:this.state.selectedOperator.operatorSteps&&Object.keys(this.state.selectedOperator.operatorSteps).map((function(t){return Object(P.jsxs)(_.a.Item,{eventKey:t,children:[Object(P.jsx)(_.a.Header,{className:"pl-1",children:Object(P.jsxs)("h6",{className:"d-flex justify-content-between m-0",children:[Object(P.jsx)("span",{children:t}),Object(P.jsx)("span",{children:e.calculateDaily(e.state.selectedOperator.operatorSteps[t])})]})}),Object(P.jsx)(_.a.Body,{className:"p-0",children:Object(P.jsx)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"m-0",children:Object(P.jsx)("tbody",{children:e.state.selectedOperator.operatorSteps[t].map((function(a,s){var n=R.a.find(e.state.designs,{id:a.step.designId}),r=e.state.selectedOperator.operatorSteps[t].length-1===s;return Object(P.jsxs)("tr",{children:[Object(P.jsxs)("td",{className:"ps-4 border-left-0 ".concat(r?"border-bottom-0":""),children:[n.name,"-",n.description,"-",a.step.name]}),Object(P.jsxs)("td",{className:r?"border-bottom-0":"",children:[!a.editable&&Object(P.jsx)("span",{children:a.quantity}),a.editable&&Object(P.jsxs)("div",{className:"d-flex",children:[Object(P.jsx)("input",{name:"quantity",type:"number",className:"form-control",defaultValue:a.quantity,onChange:function(n){a.updatedQuantity=parseInt(n.target.value);var r=e.state.selectedOperator;r.operatorSteps[t][s]=a,e.setState({operator:r})}}),Object(P.jsx)(C.a,{variant:"primary",onClick:function(){e.updateOperatorStep(a,t,s)},size:"sm",children:Object(P.jsx)(z.a,{icon:U.h})})]})]}),Object(P.jsx)("td",{className:r?"border-bottom-0":"",children:ee.a.duration(a.step.estimatedTime*a.quantity,"seconds").format("d [d] hh [h] mm [min]")}),Object(P.jsx)("td",{className:"text-center border-right-0 ".concat(r?"border-bottom-0":""),children:Object(P.jsx)(C.a,{variant:"outline-primary",className:"mr-1",onClick:function(){a.editable=!a.editable,a.updatedQuantity=a.quantity;var n=e.state.selectedOperator;n.operatorSteps[t][s]=a,e.setState({operator:n})},size:"sm",children:Object(P.jsx)(z.a,{icon:U.c})})})]},s)}))})})})]},t)}))})]}),Object(P.jsx)(H.a.Footer,{children:Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose,children:"Ok"})})]}),Object(P.jsxs)(H.a,{scrollable:!0,show:this.state.modal.showSalaryModal,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:"Salary Sheets"})}),Object(P.jsx)(H.a.Body,{className:"printable",children:Object(P.jsx)(b.a,{children:Object(P.jsx)(y.a,{children:this.state.operators&&this.state.operators.map((function(a,s){return(0!==a.lastMonthTime||"1"!==a.type)&&Object(P.jsx)("div",{className:"salary-table w-50 mb-5",children:Object(P.jsxs)(A.a,{borderless:!0,children:[Object(P.jsxs)("colgroup",{children:[Object(P.jsx)("col",{}),Object(P.jsx)("col",{}),Object(P.jsx)("col",{})]}),Object(P.jsxs)("tbody",{children:[Object(P.jsx)("tr",{children:Object(P.jsx)("td",{colSpan:3,className:"text-center",children:Object(P.jsxs)("div",{className:"flex-column align-items-center",children:[Object(P.jsx)("div",{children:Object(P.jsx)("img",{alt:"logo",className:"logo-salary-print",src:te})}),Object(P.jsx)("br",{}),Object(P.jsx)("div",{children:Object(P.jsx)("small",{children:"Garment"})}),Object(P.jsx)("div",{children:Object(P.jsx)("small",{children:"Temple Road, Bingiriya"})})]})})}),Object(P.jsx)("tr",{className:"border-top",children:Object(P.jsxs)("td",{colSpan:3,className:"text-center",children:[a.fullName||a.name," - ",Object(P.jsx)("small",{children:Object(P.jsx)(X.a,{format:"MMMM YYYY",subtract:{months:1},children:t})})]})}),"1"===a.type&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("tr",{className:"border-top",children:[Object(P.jsx)("td",{children:"Working Hours"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:e.timeFormatter(a.lastMonthTime)})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Completed Dresses"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(a.lastMonthCompleteCount)})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Salary"}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:e.salaryFormatter(a.lastMonthSalary)})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Operator Of Month"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:a.performancePlaceLastMonth})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Operator Of Month Bonus"}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{className:"text-right",children:e.salaryFormatter(a.lastMonthBonus)})]})]}),"2"===a.type&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("tr",{className:"border-top",children:[Object(P.jsx)("td",{children:"Completed Dresses (Nolimit)"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(a.lastMonthNLMCompleteCount)})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Completed Dresses (Cleopatra)"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(a.lastMonthCLCompleteCount)})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Completed Dresses (Moda Bella)"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(a.lastMonthMBCompleteCount)})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Completed Dresses Total"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(a.lastMonthCompleteCount)})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Salary (Helper)"}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{className:"text-right",children:e.salaryFormatter(a.lastMonthSalary)})]})]}),"3"===a.type&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("tr",{className:"border-top",children:[Object(P.jsx)("td",{children:"Number of cut garments (NOLIMIT)"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(e.state.lastMonthCompletedCount.nolimit)/e.state.cutterCount})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:e.salaryFormatter(parseInt(e.state.lastMonthCompletedCount.nolimit)/e.state.cutterCount*20)})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Number of cut garments (CLEOPATRA)"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(e.state.lastMonthCompletedCount.cleopatra)/e.state.cutterCount})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:e.salaryFormatter(parseInt(e.state.lastMonthCompletedCount.cleopatra)/e.state.cutterCount*50)})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Number of cut garments (MODABELLA)"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(e.state.lastMonthCompletedCount.modabella)/e.state.cutterCount})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:e.salaryFormatter(parseInt(e.state.lastMonthCompletedCount.modabella)/e.state.cutterCount*100)})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Number of cut garments (Total)"}),Object(P.jsx)("td",{className:"text-right",children:Object(P.jsx)("small",{children:parseInt(e.state.lastMonthCompletedCount.total)/e.state.cutterCount})}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:e.calculateTotalSalary(a)})]})]}),e.state.settings.isTransportEnable&&Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Transport"}),Object(P.jsxs)("td",{children:[Object(P.jsxs)("div",{children:["Work Days: ",Object(P.jsx)("input",{style:{width:"50px"},className:"small border-0",defaultValue:a.lastMonthWRKDays,onChange:function(t){a.lastMonthWRKDays=parseInt(t.target.value);var n=e.state.operators;n[s]=a,e.setState({operators:n})}})]}),Object(P.jsxs)("div",{children:["Distance (KM) : ",a.distance]})]}),Object(P.jsx)("td",{className:"text-right",children:e.salaryFormatter(e.calculateTransport(a))})]}),Object(P.jsx)("tr",{className:"non-printable",children:Object(P.jsx)("td",{colSpan:3,children:Object(P.jsx)(C.a,{onClick:function(t){var n=a;n.extraPayments.push({label:"",val:0});var r=e.state.operators;r[s]=n,e.setState({operators:r})},variant:"primary",children:"Add Extra"})})}),a.extraPayments.map((function(t,n){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("tr",{className:"non-printable",children:[Object(P.jsx)("td",{children:Object(P.jsx)(C.a,{size:"sm",variant:"danger",children:" - "})}),Object(P.jsx)("td",{className:"vertical_align_middle",children:Object(P.jsx)("input",{className:"small border-0 border-bottom",defaultValue:t.label,onChange:function(r){t.label=r.target.value;var c=a;c.extraPayments[n]=t;var i=e.state.operators;i[s]=c,e.setState({operators:i})}})}),Object(P.jsxs)("td",{className:"vertical_align_middle",children:[" Rs.",Object(P.jsx)("input",{className:"small border-0 border-bottom",defaultValue:t.val,onChange:function(r){t.val=parseInt(r.target.value);var c=a;c.extraPayments[n]=t;var i=e.state.operators;i[s]=c,e.setState({operators:i})}})]})]}),Object(P.jsxs)("tr",{className:"d-none printable-row",children:[Object(P.jsx)("td",{className:"vertical_align_middle",children:t.label}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{className:"vertical_align_middle",children:e.salaryFormatter(t.val)})]})]})})),Object(P.jsxs)("tr",{className:"border-top",children:[Object(P.jsx)("td",{children:"Total Salary"}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{className:"text-right border-bottom",children:Object(P.jsx)("strong",{children:e.calculateTotalSalary(a)})})]})]})]})},s)}))})})}),Object(P.jsxs)(H.a.Footer,{children:[Object(P.jsx)(C.a,{variant:"primary",onClick:function(){e.print()},children:"Print"})," ",Object(P.jsx)(C.a,{variant:"secondary",onClick:this.handleClose,children:"Cancel"})]})]})]})}}]),a}(n.a.Component),ne=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).notifyError=function(e){return M.b.error(e)},s.notifySuccess=function(e){return M.b.success(e)},s.handleSubmit=function(e){!1===e.currentTarget.checkValidity()?s.setState({validated:!0}):(s.setState({isLoading:!0}),Object(F.trackPromise)(E.addDesign(s.state.form).then((function(e){s.setState({isLoading:!1,form:Object(x.a)(Object(x.a)({},s.state.form),{},{name:""})}),s.notifySuccess('Design "'.concat(e.name,'" added successfully'))}),(function(e){s.notifyError(e)})))),e.preventDefault(),e.stopPropagation()},s.getSawingValueDefault=function(e,t){var a=0;return 1===e?"nolimit"===t?a=70:"cleopatra"===t?a=150:("modabella"===t||"sample"===t)&&(a=250):"nolimit"===t?a=20:("cleopatra"===t||"modabella"===t||"sample"===t)&&(a=25),a},s.handleDesignTypeChange=function(e){var t=e.target,a=parseInt(t.value),n=s.getSawingValueDefault(a,s.state.form.brand),r=Object(x.a)(Object(x.a)({},s.state.form),{},{sewingValue:n,type:a});s.setState({form:r})},s.handleBrandChange=function(e){var t=e.target.value,a=s.getSawingValueDefault(s.state.form.type,t),n=Object(x.a)(Object(x.a)({},s.state.form),{},{sewingValue:a,brand:t});s.setState({form:n})},s.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:"number"===t.type?parseInt(t.value)?parseInt(t.value):"":t.value,n=t.name;console.log(n),s.setState({form:Object(x.a)(Object(x.a)({},s.state.form),{},Object(p.a)({},n,a))})},s.state={form:{name:"",description:"",quantity:1,sewingValue:0,type:1,brand:"",startTime:new Date,isComplete:!1},validated:!1,isLoading:!1},s.handleInputChange=s.handleInputChange.bind(Object(f.a)(s)),s}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsxs)(b.a,{children:[Object(P.jsx)("br",{}),Object(P.jsx)("h1",{children:"Add Design"}),Object(P.jsx)("br",{}),Object(P.jsxs)(g.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,children:[Object(P.jsxs)(g.a.Group,{as:y.a,id:"name",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Name"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsx)(g.a.Control,{type:"text",name:"name",value:this.state.form.name,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,id:"description",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Description"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsx)(g.a.Control,{type:"text",name:"description",value:this.state.form.description,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,controlId:"exampleForm.ControlSelect1",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Select Design Type"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsxs)(g.a.Control,{as:"select",name:"type",onChange:this.handleDesignTypeChange,required:!0,children:[Object(P.jsx)("option",{value:""}),Object(P.jsx)("option",{value:"1",children:"Sawing"}),Object(P.jsx)("option",{value:"2",children:"Helper"})]})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,controlId:"exampleForm.ControlSelect2",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Select Brand"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsxs)(g.a.Control,{as:"select",name:"brand",value:this.state.form.brand,onChange:this.handleBrandChange,required:!0,children:[Object(P.jsx)("option",{value:""}),Object(P.jsx)("option",{value:"nolimit",children:"Nolimit"}),Object(P.jsx)("option",{value:"cleopatra",children:"Cleopatra"}),Object(P.jsx)("option",{value:"modabella",children:"Moda Bella"}),Object(P.jsx)("option",{value:"sample",children:"Sample"})]})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,id:"quantity",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Quantity"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsx)(g.a.Control,{type:"number",name:"quantity",value:this.state.form.quantity,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,id:"sewingValue",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Sewing Value"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsx)(g.a.Control,{type:"number",name:"sewingValue",value:this.state.form.sewingValue,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsx)(C.a,{type:"submit",disabled:this.state.isLoading,variant:"dark",children:this.state.isLoading?"Loading":"Add Design"})]})]})}}]),a}(n.a.Component),re=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSubmit=function(e,t){!1===e.currentTarget.checkValidity()?s.setState({validated:!0}):(s.setState({isLoading:!0}),Object(F.trackPromise)(E.editDesign(s.props.design.id,s.state.form).then((function(e){s.setState({isLoading:!1,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{show:!0,title:"Success",body:'Design "'.concat(s.state.form.name,'" Updated successfully')})}),s.props.design.description=s.state.form.description,s.props.design.type=s.state.form.type,s.props.design.brand=s.state.form.brand,s.props.design.name=s.state.form.name,s.props.design.quantity=s.state.form.quantity,s.props.design.sewingValue=s.state.form.sewingValue,s.props.design.isComplete=s.state.form.isComplete}),(function(e){s.setState({msg:e,isLoading:!1}),console.error("Error:",e)})))),e.preventDefault(),e.stopPropagation()},s.getSawingValueDefault=function(e,t){var a=0;return 1===e?"nolimit"===t?a=70:"cleopatra"===t?a=150:("modabella"===t||"sample"===t)&&(a=250):"nolimit"===t?a=20:("cleopatra"===t||"modabella"===t||"sample"===t)&&(a=25),a},s.handleDesignTypeChange=function(e){var t=e.target,a=parseInt(t.value),n=s.getSawingValueDefault(a,s.state.form.brand),r=Object(x.a)(Object(x.a)({},s.state.form),{},{sewingValue:n,type:a});s.setState({form:r})},s.handleBrandChange=function(e){var t=e.target.value,a=s.getSawingValueDefault(s.state.form.type,t),n=Object(x.a)(Object(x.a)({},s.state.form),{},{sewingValue:a,brand:t});s.setState({form:n})},s.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:"number"===t.type?parseInt(t.value)?parseInt(t.value):"":t.value,n=t.name;console.log(n),s.setState({form:Object(x.a)(Object(x.a)({},s.state.form),{},Object(p.a)({},n,a))})},s.handleClose=function(){s.setState({modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{show:!1})})},s.state={form:{name:"",description:"",type:1,brand:"",quantity:0,sewingValue:0,isComplete:!1},modal:{show:!1,title:"",body:""},validated:!1,isLoading:!1},s.handleInputChange=s.handleInputChange.bind(Object(f.a)(s)),s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.design.name),this.setState({form:Object(x.a)(Object(x.a)({},this.state.form),{},{name:this.props.design.name||"",description:this.props.design.description||"",type:this.props.design.type||1,brand:this.props.design.brand||"",quantity:this.props.design.quantity||0,sewingValue:this.props.design.sewingValue||0,isComplete:this.props.design.isComplete||!1})})}},{key:"render",value:function(){return Object(P.jsxs)(b.a,{children:[Object(P.jsxs)(g.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,children:[Object(P.jsxs)(g.a.Group,{as:y.a,id:"name",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"3",children:"Name"}),Object(P.jsx)(v.a,{sm:"9",children:Object(P.jsx)(g.a.Control,{type:"text",name:"name",value:this.state.form.name,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,id:"description",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"3",children:"Description"}),Object(P.jsx)(v.a,{sm:"9",children:Object(P.jsx)(g.a.Control,{type:"text",name:"description",value:this.state.form.description,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,controlId:"exampleForm.ControlSelect1",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"3",children:"Select Design Type"}),Object(P.jsx)(v.a,{sm:"9",children:Object(P.jsxs)(g.a.Control,{as:"select",name:"type",value:this.state.form.type,onChange:this.handleDesignTypeChange,children:[Object(P.jsx)("option",{value:"1",children:"Sawing"}),Object(P.jsx)("option",{value:"2",children:"Helper"})]})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,controlId:"exampleForm.ControlSelect2",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"3",children:"Select Brand"}),Object(P.jsx)(v.a,{sm:"9",children:Object(P.jsxs)(g.a.Control,{as:"select",name:"brand",value:this.state.form.brand,onChange:this.handleBrandChange,required:!0,children:[Object(P.jsx)("option",{value:""}),Object(P.jsx)("option",{value:"nolimit",children:"Nolimit"}),Object(P.jsx)("option",{value:"cleopatra",children:"Cleopatra"}),Object(P.jsx)("option",{value:"modabella",children:"Moda Bella"}),Object(P.jsx)("option",{value:"sample",children:"Sample"})]})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,id:"quantity",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"3",children:"Quantity"}),Object(P.jsx)(v.a,{sm:"9",children:Object(P.jsx)(g.a.Control,{type:"number",name:"quantity",value:this.state.form.quantity,onChange:this.handleInputChange})})]}),Object(P.jsxs)(g.a.Group,{as:y.a,id:"sewingValue",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"3",children:"Sewing Value"}),Object(P.jsx)(v.a,{sm:"9",children:Object(P.jsx)(g.a.Control,{type:"number",name:"sewingValue",value:this.state.form.sewingValue,onChange:this.handleInputChange,required:!0})})]}),Object(P.jsx)(g.a.Group,{as:y.a,id:"quantity",children:Object(P.jsx)(v.a,{sm:"12",children:Object(P.jsx)(g.a.Check,{type:"checkbox",id:"isComplete",label:"Check here for complete the design",name:"isComplete",checked:this.state.form.isComplete,onChange:this.handleInputChange})})}),Object(P.jsx)(C.a,{type:"submit",disabled:this.state.isLoading,variant:"dark",children:this.state.isLoading?"Loading":"Edit Design"})]}),Object(P.jsxs)(H.a,{show:this.state.modal.show,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsx)(H.a.Body,{children:this.state.modal.body}),Object(P.jsx)(H.a.Footer,{children:Object(P.jsx)(C.a,{variant:"secondary",onClick:this.props.editComplete,children:"Ok"})})]})]})}}]),a}(n.a.Component),ce=a(96),ie=a(106),oe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).notifyError=function(e){return M.b.error(e)},s.notifySuccess=function(e){return M.b.success(e)},s.fetchDesigns=function(e){Object(F.trackPromise)(E.getAllDesigns(e).then((function(e){s.setState({designs:e})}),(function(e){s.setState({msg:e}),console.error("Error:",e)})))},s.editDesign=function(e){s.setState({selectedDesign:e,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showEditModal:!0,title:"Edit Design",body:""})})},s.removeDesign=function(e){s.setState({selectedDesign:e,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showConfirmation:!0,title:"Remove Design ".concat(e.name),body:"Are you sure ?"})})},s.confirmDelete=function(){s.setState({isLoading:!0}),Object(F.trackPromise)(E.deleteDesign(s.state.selectedDesign.id).then((function(){var e=s.state.designs,t=e.indexOf(s.state.selectedDesign);e.splice(t,1),s.setState({designs:e,isLoading:!1}),s.handleClose(),s.notifySuccess("".concat(s.state.selectedDesign.name," successfully deleted"))}),(function(e){s.notifyError(e)})))},s.duplicateDesign=function(e){var t=R.a.cloneDeep(e);delete t.id,t.steps&&t.steps.forEach((function(e){delete e.id,delete e.operatorSteps,delete e.designId})),console.log(t),s.setState({selectedDesign:t,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showDuplicateModal:!0,title:"Duplicate Design"})})},s.confirmDesignDuplicate=function(){s.setState({isLoading:!0});var e=s.state.selectedDesign;Object(F.trackPromise)(E.addDesign({name:e.name,description:e.description,brand:e.brand,quantity:0,sewingValue:e.sewingValue,startTime:new Date,type:e.type,isComplete:!1}).then((function(e){s.duplicateOperations(e.id)}),(function(e){s.notifyError(e)})))},s.duplicateOperations=function(e){var t=s.state.selectedDesign,a=[];t.steps&&t.steps.forEach((function(t){t.designId=e,a.push(t)})),Object(F.trackPromise)(B.addAllOperations(a).then((function(){s.setState({isLoading:!1,form:Object(x.a)(Object(x.a)({},s.state.form),{},{name:""}),modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showDuplicateModal:!1,title:"Success",body:'Design "'.concat(t.name,'" duplicated successfully')})}),s.notifySuccess('Design "'.concat(t.name,'" duplicated successfully')),s.fetchDesigns("incomplete")}),(function(e){s.notifyError(e)})))},s.viewDesignInfo=function(){var e=Object(ie.a)(Object(ce.a)().mark((function e(t){return Object(ce.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({selectedDesign:t,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showInfoModal:!0,title:"".concat(t.name," Details"),body:""})});case 2:s.calculateTotalTimeToComplete(),s.calculateCompletedTime();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.calculateTimeToComplete=function(){var e=s.state.selectedDesign;if(!e.steps)return 0;var t=0;return e.steps.map((function(e){return t+=e.estimatedTime})),Math.floor(t/60)+" Minutes  "+t%60+" Seconds"},s.calculateCompletedTime=function(){var e=s.state.selectedDesign;if(!e.steps)return 0;var t=0;e.steps.map((function(e){return e.operatorSteps&&e.operatorSteps.map((function(a){return t+=a.quantity*e.estimatedTime})),0})),e.totalCompletedTime=t,s.setState({selectedDesign:e})},s.calculateTotalTimeToComplete=function(){var e=s.state.selectedDesign;if(!e.steps)return 0;var t=0;return e.steps.map((function(e){return t+=e.estimatedTime})),e.totalTimeToComplete=t*s.state.selectedDesign.quantity,s.setState({selectedDesign:e}),s.state.selectedDesign},s.timeFormatter=function(e){return Math.floor(e/60/60)+" Hours  "+Math.floor(e/60%60)+" Minutes  "+e%60+" Seconds"},s.operationCompletedCount=function(e){if(!e)return 0;var t=0;return e.map((function(e){return t+=e.quantity})),t<s.state.selectedDesign.quantity?Object(P.jsx)("span",{className:"text-warning",children:t}):t>s.state.selectedDesign.quantity?Object(P.jsx)("span",{className:"text-danger",children:t}):Object(P.jsx)("span",{className:"text-success",children:t})},s.handleClose=function(){s.setState({modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showConfirmation:!1,showEditModal:!1,showInfoModal:!1,showOperationInfoModal:!1,showDuplicateModal:!1})})},s.handleDesignTypeChange=function(e){var t=e.target.value,a=Object(x.a)(Object(x.a)({},s.state.filter),{},{type:t});s.setState({filter:a})},s.handleBrandChange=function(e){var t=e.target.value,a=Object(x.a)(Object(x.a)({},s.state.filter),{},{brand:t});s.setState({filter:a})},s.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:"number"===t.type?parseInt(t.value)?parseInt(t.value):"":t.value,n=t.name;console.log(n,a),s.setState({filter:Object(x.a)(Object(x.a)({},s.state.filter),{},Object(p.a)({},n,a))})},s.filterData=function(){var e=s.state.filter.brand,t=s.state.filter.type,a=s.state.filter.keyword.toLowerCase(),n=s.state.designs;n=R.a.filter(n,(function(e){if(e.name.toLowerCase().includes(a)||e.description.toLowerCase().includes(a))return e})),""!==e&&(n=R.a.filter(n,(function(t){return null!=t&&t.brand===e}))),""!==t&&(n=R.a.filter(n,(function(e){return null!=e&&e.type===parseInt(t)}))),s.setState({filteredDesign:n})},s.viewOperationInfo=function(e,t){s.setState({selectedOperation:t,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showOperationInfoModal:!0,title:"".concat(e.name," - ").concat(t.name," Details")})})},s.state={designs:[],selectedOperation:[],filteredDesign:[],filter:{keyword:"",type:"",brand:""},currentUser:null,view:"incomplete",modal:{showConfirmation:!1,showInfoModal:!1,showOperationInfoModal:!1,showEditModal:!1,showDuplicateModal:!1,title:"",body:""},selectedDesign:{},isLoading:!1},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;L.currentUser.subscribe((function(t){return e.setState({currentUser:t})})),this.fetchDesigns(this.state.view)}},{key:"componentDidUpdate",value:function(e,t,a){t.filter===this.state.filter&&t.designs===this.state.designs||this.filterData()}},{key:"render",value:function(){var e=this;return Object(P.jsxs)(b.a,{children:[Object(P.jsx)("br",{}),Object(P.jsxs)("div",{className:"d-flex flex-row justify-content-between mt-2 mb-2",children:[Object(P.jsx)("div",{className:"custom-file w-25 text-left",children:Object(P.jsx)("h2",{children:"View Designs"})}),Object(P.jsx)("div",{className:"flex-row d-flex flex-grow-1",children:Object(P.jsx)(g.a.Group,{as:v.a,id:"name",children:Object(P.jsx)("div",{children:Object(P.jsx)(g.a.Control,{type:"text",name:"keyword",value:this.state.filter.keyword,onChange:this.handleInputChange,required:!0})})})}),Object(P.jsxs)("div",{className:"flex-row d-flex",children:[Object(P.jsx)(g.a.Group,{className:"mb-0",as:v.a,controlId:"exampleForm.ControlSelect1",children:Object(P.jsx)("div",{children:Object(P.jsxs)(g.a.Control,{defaultValue:"",className:"w-auto",as:"select",name:"type",onChange:this.handleDesignTypeChange,children:[Object(P.jsx)("option",{value:"",disabled:!0,children:"Select Type"}),Object(P.jsx)("option",{value:""}),Object(P.jsx)("option",{value:"1",children:"Sawing"}),Object(P.jsx)("option",{value:"2",children:"Helper"})]})})}),Object(P.jsx)(g.a.Group,{className:"mb-0",as:v.a,controlId:"exampleForm.ControlSelect1",children:Object(P.jsx)("div",{children:Object(P.jsxs)(g.a.Control,{defaultValue:"",className:"w-auto",as:"select",name:"brand",onChange:this.handleBrandChange,required:!0,children:[Object(P.jsx)("option",{value:"",disabled:!0,children:"Select Brand"}),Object(P.jsx)("option",{value:""}),Object(P.jsx)("option",{value:"nolimit",children:"Nolimit"}),Object(P.jsx)("option",{value:"cleopatra",children:"Cleopatra"}),Object(P.jsx)("option",{value:"modabella",children:"Moda Bella"}),Object(P.jsx)("option",{value:"sample",children:"Sample"})]})})})]}),Object(P.jsx)("div",{children:Object(P.jsxs)(J.a,{size:"sm",children:[Object(P.jsx)(C.a,{variant:"incomplete"===this.state.view?"primary":"outline-primary",onClick:function(){e.setState({view:"incomplete"}),e.fetchDesigns("incomplete")},children:"Incomplete"}),Object(P.jsx)(C.a,{variant:"complete"===this.state.view?"primary":"outline-primary",onClick:function(){e.setState({view:"complete"}),e.fetchDesigns("complete")},children:"Complete"}),Object(P.jsx)(C.a,{variant:"all"===this.state.view?"primary":"outline-primary",onClick:function(){e.setState({view:"all"}),e.fetchDesigns("all")},children:"All"})]})})]}),Object(P.jsx)("br",{}),Object(P.jsx)(y.a,{children:Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",style:{width:"100%"},children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{className:"d-none d-md-table-cell",children:"Desc"}),Object(P.jsx)("th",{className:"d-none d-md-table-cell",children:"Type"}),Object(P.jsx)("th",{className:"d-none d-md-table-cell",children:"Brand"}),Object(P.jsx)("th",{width:90,className:"d-none d-md-table-cell",children:"Quantity"}),Object(P.jsx)("th",{width:110,children:"Status"}),Object(P.jsx)("th",{width:145,children:"Actions"})]})}),Object(P.jsx)("tbody",{children:this.state.filteredDesign.map((function(t,a){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{title:t.name,children:Object(P.jsx)("div",{children:t.name})}),Object(P.jsx)("td",{className:"d-none d-md-table-cell text-truncate",title:t.description,children:t.description}),Object(P.jsx)("td",{className:"d-none d-md-table-cell pr-3",children:1===t.type?"Sawing":"Helper"}),Object(P.jsx)("td",{className:"d-none d-md-table-cell pr-3 text-capitalize",children:t.brand}),Object(P.jsx)("td",{className:"d-none d-md-table-cell text-right pr-3",children:t.quantity}),Object(P.jsx)("td",{children:t.isComplete?"Complete":"Not Complete"}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[Object(P.jsx)(C.a,{className:"mr-1",variant:"outline-primary",onClick:function(){return e.viewDesignInfo(t)},size:"sm",children:Object(P.jsx)(z.a,{title:"Details",icon:U.d})}),Object(P.jsx)(C.a,{className:"mr-1",variant:"outline-primary",onClick:function(){return e.editDesign(t)},size:"sm",children:Object(P.jsx)(z.a,{title:"Edit",icon:U.c})}),Object(P.jsx)(C.a,{className:"mr-1",variant:"outline-primary",onClick:function(){return e.duplicateDesign(t)},size:"sm",children:Object(P.jsx)(z.a,{title:"Duplicate",icon:U.b})}),e.state.currentUser&&e.state.currentUser.roles.includes("admin")&&!t.steps&&Object(P.jsx)(C.a,{variant:"danger",onClick:function(){return e.removeDesign(t)},size:"sm",children:Object(P.jsx)(z.a,{title:"Delete",icon:U.g})})]})})]},a)}))})]})}),Object(P.jsxs)(H.a,{show:this.state.modal.showConfirmation,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsx)(H.a.Body,{children:this.state.modal.body}),Object(P.jsxs)(H.a.Footer,{children:[Object(P.jsx)(C.a,{variant:"secondary",onClick:this.confirmDelete,children:this.state.isLoading?"Loading":"Confirm"}),Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose,children:"Cancel"})]})]}),Object(P.jsxs)(H.a,{show:this.state.modal.showEditModal,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsx)(H.a.Body,{children:Object(P.jsx)(re,{design:this.state.selectedDesign,history:this.props.history,editComplete:function(){return e.handleClose()}})}),Object(P.jsx)(H.a.Footer,{children:Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose,children:"Cancel"})})]}),Object(P.jsxs)(H.a,{show:this.state.modal.showInfoModal,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsxs)(H.a.Body,{children:[Object(P.jsx)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(P.jsxs)("tbody",{children:[Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Name"}),Object(P.jsx)("td",{children:this.state.selectedDesign.name})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Desc"}),Object(P.jsx)("td",{children:this.state.selectedDesign.description})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Quantity"}),Object(P.jsx)("td",{children:this.state.selectedDesign.quantity})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Sewing Value"}),Object(P.jsx)("td",{children:this.state.selectedDesign.sewingValue})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Time To Complete One"}),Object(P.jsx)("td",{children:this.calculateTimeToComplete()})]}),Object(P.jsxs)("tr",{children:[Object(P.jsxs)("td",{children:["Time To Complete ",this.state.selectedDesign.quantity]}),Object(P.jsx)("td",{children:this.timeFormatter(this.state.selectedDesign.totalTimeToComplete)})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Currently Completed"}),Object(P.jsx)("td",{children:this.timeFormatter(this.state.selectedDesign.totalCompletedTime)})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:" Completed Percentage"}),Object(P.jsxs)("td",{children:[Math.round(this.state.selectedDesign.totalCompletedTime/this.state.selectedDesign.totalTimeToComplete*1e4)/100," %"]})]})]})}),Object(P.jsx)("br",{}),Object(P.jsx)("h6",{children:"Operations"}),Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{width:150,children:"Completed Count"}),Object(P.jsx)("th",{})]})}),Object(P.jsx)("tbody",{children:this.state.selectedDesign.steps&&this.state.selectedDesign.steps.map((function(t,a){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t.name}),Object(P.jsx)("td",{className:"text-right",children:e.operationCompletedCount(t.operatorSteps)}),Object(P.jsx)("td",{className:"text-center",children:Object(P.jsx)(C.a,{variant:"outline-primary",onClick:function(){return e.viewOperationInfo(e.state.selectedDesign,t)},size:"sm",children:Object(P.jsx)(z.a,{icon:U.d})})})]},a)}))})]})]}),Object(P.jsx)(H.a.Footer,{children:Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose,children:"Cancel"})})]}),Object(P.jsxs)(H.a,{show:this.state.modal.showDuplicateModal,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsxs)(H.a.Body,{children:[Object(P.jsxs)(y.a,{className:"mb-3 w-100",children:[Object(P.jsx)(v.a,{md:12,children:Object(P.jsxs)(g.a.Group,{className:"mb-3",as:y.a,id:"name",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Name"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsx)(g.a.Control,{type:"text",name:"description",value:this.state.selectedDesign.name,onChange:function(t){e.setState({selectedDesign:Object(x.a)(Object(x.a)({},e.state.selectedDesign),{},{name:t.target.value})})},required:!0})})]})}),Object(P.jsx)(v.a,{md:12,children:Object(P.jsxs)(g.a.Group,{className:"mb-3",as:y.a,id:"description",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Description"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsx)(g.a.Control,{type:"text",name:"description",value:this.state.selectedDesign.description,onChange:function(t){e.setState({selectedDesign:Object(x.a)(Object(x.a)({},e.state.selectedDesign),{},{description:t.target.value})})},required:!0})})]})}),Object(P.jsx)(v.a,{md:12,children:Object(P.jsxs)(g.a.Group,{className:"mb-3",as:y.a,id:"quantity",children:[Object(P.jsx)(g.a.Label,{column:!0,sm:"2",children:"Quantity"}),Object(P.jsx)(v.a,{sm:"10",children:Object(P.jsx)(g.a.Control,{type:"text",name:"quantity",value:this.state.selectedDesign.quantity,onChange:function(t){e.setState({selectedDesign:Object(x.a)(Object(x.a)({},e.state.selectedDesign),{},{quantity:t.target.value})})},required:!0})})]})})]}),Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{children:"Description"}),Object(P.jsx)("th",{children:"Estimated Time"})]})}),Object(P.jsx)("tbody",{children:this.state.selectedDesign.steps&&this.state.selectedDesign.steps.map((function(e,t){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.name}),Object(P.jsx)("td",{children:e.description}),Object(P.jsx)("td",{children:e.estimatedTime})]},t)}))})]})]}),Object(P.jsxs)(H.a.Footer,{children:[Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"primary",onClick:this.confirmDesignDuplicate,children:"Duplicate"}),Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose,children:"Cancel"})]})]}),Object(P.jsxs)(H.a,{scrollable:!0,show:this.state.modal.showOperationInfoModal,onHide:function(){e.setState({modal:Object(x.a)(Object(x.a)({},e.state.modal),{},{showOperationInfoModal:!1})})},centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsxs)(H.a.Body,{children:[Object(P.jsx)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(P.jsxs)("tbody",{children:[Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Name"}),Object(P.jsx)("td",{children:this.state.selectedOperation.name})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Description"}),Object(P.jsx)("td",{children:this.state.selectedOperation.description})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Estimated Time (S)"}),Object(P.jsx)("td",{children:this.state.selectedOperation.estimatedTime})]})]})}),Object(P.jsx)("br",{}),Object(P.jsx)("h6",{children:"Operations"}),Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{width:150,children:"Completed Count"}),Object(P.jsx)("th",{width:150,children:"Completed On"})]})}),Object(P.jsx)("tbody",{children:this.state.selectedOperation.operatorSteps&&this.state.selectedOperation.operatorSteps.map((function(e,t){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.operator&&e.operator.name}),Object(P.jsx)("td",{children:e.quantity}),Object(P.jsx)("td",{children:Object(P.jsx)(X.a,{format:"YYYY-MMM-DD",children:e.completeTime})})]},t)}))})]})]}),Object(P.jsx)(H.a.Footer,{children:Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:function(){e.setState({modal:Object(x.a)(Object(x.a)({},e.state.modal),{},{showOperationInfoModal:!1})})},children:"Ok"})})]})]})}}]),a}(n.a.Component),le=a(42),de=a(90),je=a.n(de),he=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleAddOperation=function(){var e=Object(le.a)(s.state.form);e.unshift({name:"",description:"",estimatedTime:0,designId:s.state.selectedDesign.id}),s.setState({form:e})},s.handleRemoveOperation=function(e,t){var a=Object(le.a)(s.state.form);a.splice(e,1),s.setState({form:a})},s.handleUpdateOperation=function(e,t){if(!s.state.selectedDesign)return t.preventDefault(),t.stopPropagation(),!1;if(!1===t.currentTarget.checkValidity())s.setState({validated:!0});else{s.setState({isLoading:!0});var a=s.state.form[e];delete a.isChange,Object(F.trackPromise)(B.updateOperations(a.id,a).then((function(t){var a=s.state.form;a[e].isChange=!1,a[e].id=t.id,s.setState({isLoading:!1,form:a,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{show:!0,title:"Success",body:'Operation "'.concat(t.name,'" Added Successfully')})})}),(function(e){s.setState({msg:e}),console.error("Error:",e)})))}t.preventDefault(),t.stopPropagation()},s.handleCreateOperation=function(e,t){if(!s.state.selectedDesign)return t.preventDefault(),t.stopPropagation(),!1;if(!1===t.currentTarget.checkValidity())s.setState({validated:!0});else{s.setState({isLoading:!0});var a=s.state.form[e];delete a.isChange,Object(F.trackPromise)(B.addOperations(a).then((function(t){var a=s.state.form;a[e].isChange=!1,a[e].id=t.id,s.setState({isLoading:!1,form:a,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{show:!0,title:"Success",body:'Operation "'.concat(t.name,'" Added Successfully')})})}),(function(e){s.setState({msg:e}),console.error("Error:",e)})))}t.preventDefault(),t.stopPropagation()},s.handleInputChange=function(e,t){var a=t.target,n="checkbox"===a.type?a.checked:"number"===a.type?parseInt(a.value)?parseInt(a.value):"":a.value,r=a.name,c=s.state.form;c[e][r]=n,c[e].isChange=""!==n,s.setState({form:c})},s.handleDesignChange=function(e){var t=e.target.value;if(""===t)return s.setState({form:[],selectedDesign:!1}),!1;var a=s.state.designs[t],n=a.steps?a.steps:[{name:"",description:"1",estimatedTime:0,designId:a.id}];s.setState({form:n,selectedDesign:a})},s.handleTimer=function(e){s.setState({timerModal:!0,selectedOperationIndex:e})},s.handleClose=function(){s.setState({modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{show:!1})})},s.userTimer=n.a.createRef(),s.state={designs:[],selectedDesign:!1,selectedOperationIndex:!1,form:[{name:"",description:"",estimatedTime:"",designId:null}],modal:{show:!1,title:"",body:""},timerModal:!1,validated:!1,isLoading:!1},s.handleInputChange=s.handleInputChange.bind(Object(f.a)(s)),s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchDesigns()}},{key:"fetchDesigns",value:function(){var e=this;Object(F.trackPromise)(E.getIncompleteDesignsWithOperations().then((function(t){var a=t[0]&&t[0].steps?t[0].steps:[{name:"",description:"",estimatedTime:0,designId:t[0]?t[0].id:void 0}];e.setState({designs:t,selectedDesign:t[0],form:a})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"render",value:function(){var e=this;return Object(P.jsxs)(b.a,{children:[Object(P.jsx)("br",{}),Object(P.jsx)("h2",{children:"Add Operations"}),Object(P.jsx)("br",{}),Object(P.jsxs)(g.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,children:[Object(P.jsxs)(g.a.Group,{controlId:"exampleForm.ControlSelect1",children:[Object(P.jsx)(g.a.Label,{children:"Select Design"}),Object(P.jsx)(g.a.Control,{as:"select",onChange:this.handleDesignChange,children:this.state.designs.length>0&&this.state.designs.map((function(e,t){return Object(P.jsx)("option",{value:t,children:e.name},t)}))})]}),this.state.form.length>0&&this.state.form.map((function(t,a){return Object(P.jsxs)(s.Fragment,{children:[Object(P.jsxs)(y.a,{className:"align-items-center no-gutters",children:[Object(P.jsxs)("h5",{className:"mr-2",children:["Operation ",a+1," --"]}),Object(P.jsx)("h6",{className:"mr-2",children:" Hourly Target "}),Object(P.jsxs)("h6",{className:"mr-2",children:[" (Idle) = ",Math.floor(3600/t.estimatedTime),", "]}),Object(P.jsxs)("h6",{className:"mr-2",children:[" (Minimum) = ",Math.floor(3600/t.estimatedTime*.8)]})]}),Object(P.jsx)("hr",{className:"mt-0"}),Object(P.jsxs)(g.a.Group,{as:y.a,children:[Object(P.jsxs)(v.a,{sm:12,md:3,className:"mb-2",children:[Object(P.jsx)(g.a.Label,{children:"Name"}),Object(P.jsx)(g.a.Control,{type:"text",name:"name",value:t.name,onChange:function(t){return e.handleInputChange(a,t)},required:!0})]}),Object(P.jsxs)(v.a,{sm:12,md:3,className:"mb-2",children:[Object(P.jsx)(g.a.Label,{children:"Description"}),Object(P.jsx)(g.a.Control,{type:"text",name:"description",value:t.description,onChange:function(t){return e.handleInputChange(a,t)}})]}),Object(P.jsxs)(v.a,{sm:12,md:3,className:"mb-2",children:[Object(P.jsx)(g.a.Label,{children:"Estimated Time (S)"}),Object(P.jsxs)(y.a,{children:[Object(P.jsx)(v.a,{xs:9,children:Object(P.jsx)(g.a.Control,{type:"number",name:"estimatedTime",value:t.estimatedTime,onChange:function(t){return e.handleInputChange(a,t)},required:!0})}),Object(P.jsx)(v.a,{xs:3,children:Object(P.jsx)(C.a,{type:"button",variant:"dark",onClick:function(){return e.handleTimer(a)},children:Object(P.jsx)(z.a,{icon:U.a})})})]})]}),Object(P.jsxs)(v.a,{sm:12,md:3,className:"mb-2 d-flex align-items-end justify-content-center pt-3",children:[0===a&&Object(P.jsx)(C.a,{type:"button",variant:"dark",onClick:function(){return e.handleAddOperation()},children:Object(P.jsx)(z.a,{icon:U.e})}),"\xa0",t.isChange&&t.id&&Object(P.jsx)(C.a,{type:"button",variant:"dark",disabled:e.state.isLoading||!e.state.selectedDesign||""===t.name.replace(/ /g,"")||""===t.description.replace(/ /g,"")||t.estimatedTime<1,onClick:function(t){return e.handleUpdateOperation(a,t)},children:Object(P.jsx)(z.a,{icon:U.h})}),t.isChange&&!t.id&&Object(P.jsx)(C.a,{type:"button",variant:"dark",disabled:e.state.isLoading||!e.state.selectedDesign||""===t.name.replace(/ /g,"")||""===t.description.replace(/ /g,"")||t.estimatedTime<1,onClick:function(t){return e.handleCreateOperation(a,t)},children:Object(P.jsx)(z.a,{icon:U.h})})]})]})]},a)}))]}),Object(P.jsxs)(H.a,{show:this.state.modal.show,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsx)(H.a.Body,{children:this.state.modal.body}),Object(P.jsx)(H.a.Footer,{children:Object(P.jsx)(C.a,{variant:"secondary",onClick:this.handleClose,children:"Ok"})})]}),Object(P.jsxs)(H.a,{show:this.state.timerModal,onHide:function(){e.setState({timerModal:!1})},centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:"Timer"})}),Object(P.jsx)(H.a.Body,{className:"text-center",children:Object(P.jsx)(je.a,{ref:this.userTimer,initialTime:0,startImmediately:!1,children:function(e){e.start,e.resume,e.pause,e.stop,e.reset;return Object(P.jsx)(n.a.Fragment,{children:Object(P.jsxs)(y.a,{children:[Object(P.jsxs)("h1",{className:" col-6 pr-0 text-center",children:[Object(P.jsx)(je.a.Minutes,{})," min"]}),Object(P.jsxs)("h1",{className:" col-6 text-center",children:[Object(P.jsx)(je.a.Seconds,{})," sec"]})]})})}})}),Object(P.jsxs)(H.a.Footer,{children:[Object(P.jsx)(C.a,{variant:"primary",onClick:function(){e.userTimer.current.start()},children:"start"}),Object(P.jsx)(C.a,{variant:"secondary",onClick:function(){e.userTimer.current.pause()},children:"pause"}),Object(P.jsx)(C.a,{variant:"warning",onClick:function(){e.userTimer.current.reset()},children:"reset"}),Object(P.jsx)(C.a,{variant:"info",onClick:function(){var t=e.state.form,a=t[e.state.selectedOperationIndex];a.estimatedTime=Math.floor(e.userTimer.current.getTime()/1e3),a.isChange=!0,console.log(t),e.setState({form:t,timerModal:!1})},children:"set"})]})]})]})}}]),a}(n.a.Component),me=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).operationCompletedCount=function(e,t){if(!e)return 0;var a=0;return e.map((function(e,t){return a+=e.quantity})),a<t.quantity?Object(P.jsx)("span",{className:"text-warning",children:a}):a>t.quantity?Object(P.jsx)("span",{className:"text-danger",children:a}):Object(P.jsx)("span",{className:"text-success",children:a})},s.viewOperationInfo=function(e,t){s.setState({selectedOperation:t,modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showInfoModal:!0,title:"".concat(e.name," - ").concat(t.name," Details")})})},s.handleClose=function(){s.setState({modal:Object(x.a)(Object(x.a)({},s.state.modal),{},{showInfoModal:!1})})},s.state={designs:[],selectedOperation:[],modal:{showInfoModal:!1,title:"",body:""}},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(F.trackPromise)(E.getAllIncompleteDesignsWithOperator().then((function(t){e.setState({designs:t})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"render",value:function(){var e=this;return Object(P.jsxs)(b.a,{children:[Object(P.jsx)("br",{}),Object(P.jsx)("h2",{children:"View Operations"}),Object(P.jsx)("br",{}),this.state.designs.map((function(t,a){return Object(P.jsxs)(y.a,{children:[Object(P.jsxs)("h4",{children:[t.name," - ",t.description," "]}),Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Op. Name"}),Object(P.jsx)("th",{className:"d-none d-md-table-cell",children:"Op. Description"}),Object(P.jsx)("th",{width:110,className:"d-none d-md-table-cell",children:"Est. Time"}),Object(P.jsx)("th",{width:100,children:"Completed"}),Object(P.jsx)("th",{width:50})]})}),Object(P.jsx)("tbody",{children:t.steps&&t.steps.map((function(a,s){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:a.name}),Object(P.jsx)("td",{className:"d-none d-md-table-cell",children:a.description}),Object(P.jsx)("td",{className:"d-none d-md-table-cell",children:a.estimatedTime}),Object(P.jsx)("td",{className:"text-right",children:e.operationCompletedCount(a.operatorSteps,t)}),Object(P.jsx)("td",{className:"text-center",children:Object(P.jsx)(C.a,{variant:"outline-primary",onClick:function(){return e.viewOperationInfo(t,a)},size:"sm",children:Object(P.jsx)(z.a,{icon:U.d})})})]},s)}))})]})]},a)})),Object(P.jsxs)(H.a,{scrollable:!0,show:this.state.modal.showInfoModal,onHide:this.handleClose,centered:!0,children:[Object(P.jsx)(H.a.Header,{closeButton:!0,children:Object(P.jsx)(H.a.Title,{children:this.state.modal.title})}),Object(P.jsxs)(H.a.Body,{children:[Object(P.jsx)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(P.jsxs)("tbody",{children:[Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Name"}),Object(P.jsx)("td",{children:this.state.selectedOperation.name})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Description"}),Object(P.jsx)("td",{children:this.state.selectedOperation.description})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"Estimated Time (S)"}),Object(P.jsx)("td",{children:this.state.selectedOperation.estimatedTime})]})]})}),Object(P.jsx)("br",{}),Object(P.jsx)("h6",{children:"Operations"}),Object(P.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{width:150,children:"Completed Count"}),Object(P.jsx)("th",{width:150,children:"Completed On"})]})}),Object(P.jsx)("tbody",{children:this.state.selectedOperation.operatorSteps&&this.state.selectedOperation.operatorSteps.map((function(e,t){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.operator&&e.operator.name}),Object(P.jsx)("td",{children:e.quantity}),Object(P.jsx)("td",{children:Object(P.jsx)(X.a,{format:"YYYY-MMM-DD",children:e.completeTime})})]},t)}))})]})]}),Object(P.jsx)(H.a.Footer,{children:Object(P.jsx)(C.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose,children:"Ok"})})]})]})}}]),a}(n.a.Component),be=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).notifyError=function(e){return M.b.error(e)},s.notifySuccess=function(e){return M.b.success(e)},s.handleDesignChange=function(e){var t=e.target.value;if(""===t)return s.setState({selectedDesign:!1,selectedOperation:!1}),!1;var a=s.state.designs[t],n=!!a.steps&&a.steps;s.setState({operations:n,selectedDesign:a,selectedOperation:!1,form:Object(x.a)(Object(x.a)({},s.state.form),{},{completedTime:new Date})})},s.handleSubmit=function(e){Object(F.trackPromise)(q.addOperatorOperations({quantity:s.state.form.quantity,completeTime:s.state.form.completedTime,operatorId:s.state.selectedOperator.id,stepId:s.state.selectedOperation.id}).then((function(e){var t=R.a.cloneDeep(e.quantity);console.log(t),s.setState({form:Object(x.a)(Object(x.a)({},s.state.form),{},{quantity:0})}),s.notifySuccess("".concat(s.state.selectedOperator?s.state.selectedOperator.name:""," has\n                    completed ").concat(t," of ").concat(s.state.selectedDesign?s.state.selectedDesign.name:""," - ").concat(s.state.selectedOperation?s.state.selectedOperation.name:""))}),(function(e){s.notifyError(e)}))),e.preventDefault(),e.stopPropagation()},s.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:"number"===t.type?parseInt(t.value)?parseInt(t.value):"":t.value,n=t.name;s.setState({form:Object(x.a)(Object(x.a)({},s.state.form),{},Object(p.a)({},n,a))})},s.handleDateChange=function(e){s.setState({form:Object(x.a)(Object(x.a)({},s.state.form),{},Object(p.a)({},"completedTime",e))})},s.state={operators:[],designs:[],operations:[],selectedOperator:!1,selectedDesign:!1,selectedOperation:!1,form:{operatorId:"",stepId:"",quantity:0,completedTime:new Date},isLoading:!1},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchOperators(),this.fetchDesigns()}},{key:"fetchDesigns",value:function(){var e=this;Object(F.trackPromise)(q.fetchDesigns().then((function(t){e.setState({designs:t})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"fetchOperators",value:function(){var e=this;Object(F.trackPromise)(q.getMachineOperatorsAndHelpers().then((function(t){e.setState({operators:t})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"render",value:function(){var e=this;return Object(P.jsx)("div",{children:Object(P.jsxs)(b.a,{children:[Object(P.jsx)("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"relative",minHeight:"0"}}),Object(P.jsx)("br",{}),Object(P.jsx)("h2",{children:"Operator Operations"}),Object(P.jsx)("br",{}),Object(P.jsxs)(g.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,children:[Object(P.jsxs)(g.a.Group,{className:"mt-3",controlId:"operators",children:[Object(P.jsx)(g.a.Label,{children:"Select Operator"}),Object(P.jsxs)(g.a.Control,{as:"select",onChange:function(t){e.setState({selectedOperator:e.state.operators[t.target.value]})},children:[Object(P.jsx)("option",{}),this.state.operators.length>0&&this.state.operators.map((function(e,t){return Object(P.jsx)("option",{value:t,children:e.name},t)}))]})]}),this.state.selectedOperator&&Object(P.jsxs)(g.a.Group,{className:"mt-3",controlId:"designs",children:[Object(P.jsx)(g.a.Label,{children:"Select Design"}),Object(P.jsxs)(g.a.Control,{as:"select",onChange:this.handleDesignChange,children:[Object(P.jsx)("option",{}),this.state.designs.length>0&&this.state.designs.map((function(t,a){return 1===t.type&&"1"===e.state.selectedOperator.type||2===t.type&&"2"===e.state.selectedOperator.type?Object(P.jsxs)("option",{value:a,children:[t.name," ----- ",t.description]},a):null}))]})]}),this.state.selectedDesign&&Object(P.jsxs)(g.a.Group,{className:"mt-3",controlId:"operations",children:[Object(P.jsx)(g.a.Label,{children:"Select Operation"}),Object(P.jsxs)(g.a.Control,{as:"select",onChange:function(t){console.log(t.target.value),e.setState({selectedOperation:e.state.operations[t.target.value]})},children:[Object(P.jsx)("option",{}),this.state.operations.length>0&&this.state.operations.map((function(e,t){return Object(P.jsx)("option",{value:t,children:e.name},t)}))]})]}),this.state.selectedOperation&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(g.a.Group,{className:"mt-3",id:"completedTime",children:[Object(P.jsx)(g.a.Label,{children:"Completed Date"}),Object(P.jsx)(y.a,{children:Object(P.jsx)(K.a,{name:"completedTime",onChange:this.handleDateChange,value:this.state.form.completedTime})})]}),Object(P.jsxs)(g.a.Group,{className:"mt-3",id:"quantity",children:[Object(P.jsx)(g.a.Label,{children:"Quantity"}),Object(P.jsx)(g.a.Control,{type:"number",name:"quantity",value:this.state.form.quantity,onChange:this.handleInputChange,required:!0})]})]}),this.state.selectedOperation&&this.state.form.quantity>0&&Object(P.jsx)(C.a,{className:"mt-4 mb-4",type:"submit",variant:"dark",disabled:this.state.isLoading||!this.state.selectedDesign,children:"Add Operator Operations"})]})]})})}}]),a}(n.a.Component),ue=void 0,Oe=function(){var e=Object(s.useState)(""),t=Object(G.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(""),c=Object(G.a)(r,2),i=c[0],o=c[1],l=Object(s.useState)(""),d=Object(G.a)(l,1)[0],j=Object(h.g)();return Object(P.jsx)("div",{style:{height:"calc(100vh - 56px)"},className:"d-flex justify-content-center align-items-center",children:Object(P.jsxs)("div",{style:{width:300},children:[Object(P.jsx)("h1",{className:"text-center",children:"Sign in"}),Object(P.jsxs)(g.a,{onSubmit:function(e){Object(F.trackPromise)(L.login(a,i).then((function(e){(-1!==e.roles.indexOf("admin")||-1!==e.roles.indexOf("manager")||-1!==e.roles.indexOf("manager"))&&j("/")}),(function(e){ue.setState({msg:e}),console.error("Error:",e)}))),e.preventDefault(),e.stopPropagation()},children:[Object(P.jsx)("span",{className:"text-danger",children:d}),Object(P.jsxs)(g.a.Group,{children:[Object(P.jsx)(g.a.Label,{children:"Email address"}),Object(P.jsx)(g.a.Control,{type:"email",placeholder:"Enter email",defaultValue:a,onChange:function(e){n(e.target.value)}})]}),Object(P.jsxs)(g.a.Group,{children:[Object(P.jsx)(g.a.Label,{children:"Password"}),Object(P.jsx)(g.a.Control,{type:"password",placeholder:"Password",defaultValue:i,onChange:function(e){o(e.target.value)}})]}),Object(P.jsx)(C.a,{variant:"primary",type:"submit",className:"w-100 mt-3",children:"Sign in"})]})]})})},pe=function(e){var t=e.children,a=e.roles,s=L.currentUserValue;return s?a&&0===a.filter((function(e){return s.roles.includes(e)})).length?L.logout():t:Object(P.jsx)(h.a,{to:"/sign-in"})};M.b.configure({autoClose:15e3});var xe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onLogOut=function(){L.logout()},s.state={currentUser:null},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;L.currentUser.subscribe((function(t){return e.setState({currentUser:t})}))}},{key:"allowNav",value:function(e){var t,a;return(null===(t=this.state.currentUser)||void 0===t||null===(a=t.roles)||void 0===a?void 0:a.filter((function(t){return e.includes(t)})).length)>0}},{key:"render",value:function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)(M.a,{}),Object(P.jsx)(m.a,{bg:"dark",variant:"dark",sticky:"top",expand:"lg",collapseOnSelect:!0,children:Object(P.jsxs)(b.a,{fluid:!0,children:[Object(P.jsx)(m.a.Brand,{children:"DEEZ"}),this.state.currentUser&&Object(P.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),this.state.currentUser&&Object(P.jsxs)(m.a.Collapse,{id:"basic-navbar-nav",children:[Object(P.jsxs)(u.a,{className:"me-auto",children:[Object(P.jsxs)(O.a,{title:"Operators",id:"basic-nav-dropdown",children:[Object(P.jsx)(O.a.Item,{eventKey:"11",as:j.b,to:"/add-operator",children:"Add Operators"}),Object(P.jsx)(O.a.Item,{eventKey:"12",as:j.b,to:"/edit-operator",children:"Edit Operators"}),Object(P.jsx)(O.a.Item,{eventKey:"13",as:j.b,to:"/view-operator",children:"View Operators"}),Object(P.jsx)(O.a.Item,{eventKey:"14",as:j.b,to:"/operator-operations",children:"Operator Operations"})]}),Object(P.jsxs)(O.a,{title:"Design",id:"basic-nav-dropdown",children:[Object(P.jsx)(O.a.Item,{eventKey:"21",as:j.b,to:"add-design",children:"Add Design"}),Object(P.jsx)(O.a.Item,{eventKey:"22",as:j.b,to:"view-design",children:"View Design"})]}),Object(P.jsxs)(O.a,{title:"Operations",id:"basic-nav-dropdown",children:[Object(P.jsx)(O.a.Item,{eventKey:"31",as:j.b,to:"add-operations",children:"Add Operations"}),Object(P.jsx)(O.a.Item,{eventKey:"32",as:j.b,to:"view-operations",children:"View Operations"})]})]}),Object(P.jsxs)(u.a,{children:[Object(P.jsxs)("h6",{className:"text-center text-white mb-0 d-lg-flex align-items-center d-none",children:[" ","Hello, ".concat(this.state.currentUser.username)," "]}),Object(P.jsx)(u.a.Link,{onClick:this.onLogOut,children:"Log out"})]})]})]})}),Object(P.jsx)(b.a,{fluid:!0,children:Object(P.jsxs)(h.d,{children:[Object(P.jsx)(h.b,{path:"/sign-in",element:Object(P.jsx)(Oe,{})}),Object(P.jsx)(h.b,{path:"",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(se,{})})}),Object(P.jsx)(h.b,{path:"/view-operator",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(se,{})})}),Object(P.jsx)(h.b,{path:"/add-operator",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(V,{})})}),Object(P.jsx)(h.b,{path:"/edit-operator",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(W,{})})}),Object(P.jsx)(h.b,{path:"/operator-operations",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(be,{})})}),Object(P.jsx)(h.b,{path:"/add-design",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(ne,{})})}),Object(P.jsx)(h.b,{path:"/edit-design",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(re,{})})}),Object(P.jsx)(h.b,{path:"/view-design",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(oe,{})})}),Object(P.jsx)(h.b,{path:"/add-operations",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(he,{})})}),Object(P.jsx)(h.b,{path:"/view-operations",element:Object(P.jsx)(pe,{roles:["admin","manager"],children:Object(P.jsx)(me,{})})})]})})]})}}]),a}(n.a.Component),fe=a(70),ge=a(111),ye=a(108),ve=a.n(ye),Ce=a(110),Se=a(109),De=a.n(Se),Me="INCREMENT",Ne="DECREMENT",we={count:0},Te=Object(fe.b)({counter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return Object(x.a)(Object(x.a)({},e),{},{count:e.count+t.payload});case Ne:return Object(x.a)(Object(x.a)({},e),{},{count:e.count-t.payload});default:return e}}}),ke=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,189)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))},Ie=Object(fe.c)(Te,Object(fe.a)(Ce.a,ve.a)),Le=function(){return Object(F.usePromiseTracker)().promiseInProgress&&Object(P.jsx)("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:0,left:0,background:"rgba(0, 0, 0, .2)",zIndex:10},children:Object(P.jsx)(De.a,{type:"Bars",color:"#343a40",height:80,width:100})})};c.a.render(Object(P.jsx)(ge.a,{store:Ie,children:Object(P.jsxs)(j.a,{children:[Object(P.jsx)(xe,{}),Object(P.jsx)(Le,{})]})}),document.getElementById("root")),ke()}},[[169,1,2]]]);
//# sourceMappingURL=main.fe288735.chunk.js.map